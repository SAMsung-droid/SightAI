<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="SightAI - Transformando PDFs em conhecimento acessível com IA e OCR avançado.">
    <title>SightAI | Acessibilidade Inteligente</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Plus+Jakarta+Sans:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <!-- Scripts Externos (Versão Legacy Estável para Mobile) -->
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/legacy/build/pdf.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.3/dist/tesseract.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.iife.js"></script>
    <style>
        /* LOCK SightAI THEME */
        :root {
            --bg-dark-fixed: #05080f;
            --text-main-fixed: #f1f5f9;
        }

        body {
            background-color: var(--bg-dark-fixed) !important;
            color: var(--text-main-fixed) !important;
            background-image: radial-gradient(circle at top right, #0a1628 0%, #05080f 100%) !important;
            background-attachment: fixed !important;
        }

        .card {
            background-color: rgba(15, 23, 42, 0.75) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: var(--text-main-fixed) !important;
        }

        .logo {
            background: linear-gradient(to right, #fff, #00f2ff) !important;
            -webkit-background-clip: text !important;
            background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
        }

        h1,
        h2,
        h3,
        h4,
        p,
        label,
        span {
            color: inherit !important;
        }
    </style>
</head>

<body>
    <div class="glass-background" aria-hidden="true"></div>

    <header role="banner" class="main-header">
        <div class="logo-container">
            <h1 class="logo">Sight<span>AI</span></h1>
            <p class="tagline">Visão em conhecimento acessível.</p>
        </div>
        <nav class="accessibility-controls" aria-label="Controles de Acessibilidade">
            <button id="toggle-contrast" title="Alternar Alto Contraste" aria-label="Alternar Alto Contraste">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M12 22q-4.15 0-7.075-2.925T2 12q0-4.15 2.925-7.075T12 2q4.15 0 7.075 2.925T22 12q0 4.15-2.925 7.075T12 22zm0-2q3.325 0 5.663-2.337T20 12q0-3.325-2.337-5.663T12 4v16z" />
                </svg>
            </button>
            <button id="toggle-voice-cmd" title="Comandos de Voz" aria-label="Ativar Comandos de Voz">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M12 14q-1.25 0-2.125-.875T9 11V5q0-1.25.875-2.125T12 2q1.25 0 2.125.875T15 5v6q0 1.25-.875 2.125T12 14zm-1 7v-3.075q-2.625-.35-4.312-2.35T5 11h2q0 2.075 1.463 3.538T12 16q2.075 0 3.538-1.462T17 11h2q0 2.625-1.688 4.625T13 17.925V21h-2z" />
                </svg>
            </button>
        </nav>
    </header>

    <main class="app-container">
        <!-- Step 1: Upload -->
        <section id="upload-section" class="card active" aria-labelledby="upload-title">
            <h2 id="upload-title">Processar Documento</h2>
            <div class="dropzone" id="dropzone" role="button" aria-label="Clique ou arraste um PDF aqui para processar"
                tabindex="0">
                <div class="dropzone-content">
                    <svg class="icon-upload" viewBox="0 0 24 24" width="64" height="64">
                        <path fill="currentColor"
                            d="M11 16V7.85l-2.6 2.6L7 9l5-5l5 5l-1.4 1.45l-2.6-2.6V16h-2zm-5 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20H6z" />
                    </svg>
                    <p>Arraste seu PDF ou toque para selecionar</p>
                    <span class="file-info" id="file-info-text">Nenhum arquivo selecionado</span>
                </div>
            </div>
            <input type="file" id="file-input" accept="application/pdf" hidden aria-hidden="true">
        </section>

        <!-- Step 2: Processing (Progress) -->
        <section id="processing-section" class="card hidden" aria-labelledby="processing-title">
            <h2 id="processing-title">SightAI está processando...</h2>
            <div class="progress-container">
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div id="progress-indicator" class="progress-fill"></div>
                </div>
                <p id="status-text">Analisando estrutura do PDF...</p>
            </div>
            <div class="processing-details">
                <p id="ai-insight" class="label text-center" style="text-align: center; margin-top: 1rem;">Aguardando
                    IA...</p>
            </div>
        </section>

        <!-- Step 3: Results -->
        <section id="results-section" class="card hidden" aria-labelledby="results-title">
            <div class="results-header">
                <h2 id="results-title">Conteúdo Acessível</h2>
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="btn-config-abnt">
                        Configurar ABNT
                    </button>
                    <button class="btn btn-secondary" id="btn-export-docx">
                        Exportar DOCX (sem ABNT)
                    </button>
                    <button class="btn btn-secondary" id="btn-copy">
                        Copiar Texto
                    </button>
                </div>
            </div>

            <!-- ABNT Configuration Modal-style Card -->
            <div id="abnt-config-card" class="card hidden" style="margin-bottom: 2rem; border-color: var(--primary);">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <h3 style="margin-bottom: 1rem; color: var(--primary);">Configurações ABNT</h3>
                    <button id="btn-close-abnt" class="btn-secondary"
                        style="border: none; background: transparent; cursor: pointer;">✕</button>
                </div>
                <div class="abnt-form grid-2">
                    <div class="voice-params">
                        <label for="abnt-institution">Instituição</label>
                        <input type="text" id="abnt-institution" placeholder="Ex: Universidade de Brasília">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-author">Autor</label>
                        <input type="text" id="abnt-author" placeholder="Seu nome completo">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-advisor">Orientador</label>
                        <input type="text" id="abnt-advisor" placeholder="Nome do Professor(a)">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-title">Título do Trabalho</label>
                        <input type="text" id="abnt-title" placeholder="Título Principal">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-subtitle">Subtítulo (Opcional)</label>
                        <input type="text" id="abnt-subtitle" placeholder="Complemento do título">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-nature">Natureza do Trabalho</label>
                        <input type="text" id="abnt-nature" placeholder="Ex: TCC, Relatório de Estágio">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-city">Cidade</label>
                        <input type="text" id="abnt-city" placeholder="Ex: São Paulo">
                    </div>
                    <div class="voice-params">
                        <label for="abnt-year">Ano</label>
                        <input type="text" id="abnt-year" placeholder="2026">
                    </div>
                </div>
                <div style="display: flex; justify-content: center; margin-top: 1.5rem;">
                    <button class="btn btn-primary" id="btn-export-abnt" style="width: auto; min-width: 200px;">
                        Gerar DOCX com ABNT
                    </button>
                </div>
                <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 1rem; text-align: center;">
                    * Estes dados serão usados para gerar a Capa e Folha de Rosto no padrão NBR 14724.
                </p>
            </div>

            <div class="audio-controls-card">
                <div class="audio-info">
                    <span class="label">Ouvindo Documento</span>
                    <button id="btn-summarize" class="btn btn-primary" style="padding: 0.4rem 1rem; font-size: 0.8rem;">
                        Resumo por IA
                    </button>
                </div>
                <div class="playback-controls">
                    <button id="btn-play-pause" aria-label="Play">
                        <svg id="play-icon" viewBox="0 0 24 24" width="36" height="36">
                            <path fill="currentColor" d="M8 19V5l11 7l-11 7z" />
                        </svg>
                        <svg id="pause-icon" class="hidden" viewBox="0 0 24 24" width="36" height="36">
                            <path fill="currentColor" d="M14 19V5h4v14h-4zm-8 0V5h4v14H6z" />
                        </svg>
                    </button>
                    <div class="voice-params">
                        <label for="audio-progress">Progresso da Leitura</label>
                        <input type="range" id="audio-progress" min="0" max="100" value="0" step="0.1"
                            aria-label="Progresso do áudio">
                    </div>
                    <div class="voice-params">
                        <label for="voice-speed">Velocidade</label>
                        <input type="range" id="voice-speed" min="0.5" max="2" step="0.1" value="1"
                            aria-label="Velocidade da voz">
                    </div>
                </div>
            </div>

            <textarea class="text-display" id="output-text" aria-label="Texto convertido para edição"
                spellcheck="true"></textarea>

            <nav class="navigation-controls" aria-label="Controles de navegação">
                <button class="btn btn-primary" id="btn-restart">
                    Novo PDF
                </button>
                <button class="btn btn-secondary" id="btn-continue">
                    Continuar editando
                </button>
            </nav>
        </section>
    </main>

    <footer class="app-footer">
        <div class="footer-content">
            <div class="creator-info">
                <p>Criado por: <strong>J. Matheus</strong> & <strong>Álvaro Samuel</strong></p>
                <p class="project-year">© 2026 SightAI | Tecnologia Assistiva Universal</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>